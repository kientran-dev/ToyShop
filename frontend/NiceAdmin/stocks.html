<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>

    <title>Dashboard - Aishiba</title>
    <meta content="" name="description"/>
    <meta content="" name="keywords"/>

    <!-- Favicons -->
    <link href="\assets\img\logo.png" rel="icon"/>
    <link href="\assets\img\logo.png" rel="apple-touch-icon"/>

    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect"/>
    <link
            href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i"
            rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link
            href="assets/vendor/bootstrap/css/bootstrap.min.css"
            rel="stylesheet"
    />
    <link
            href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
            rel="stylesheet"
    />
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet"/>
    <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet"/>
    <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet"/>
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet"/>
    <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet"/>

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet"/>


    <!-- =======================================================
  * Template Name: NiceAdmin
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Updated: Apr 20 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>
<!-- ======= Header ======= -->
<header id="header" class="header fixed-top d-flex align-items-center">
    <div class="d-flex align-items-center justify-content-between">
        <a href="index.html" class="logo d-flex align-items-center">
            <img src="assets/img/logo.png" alt=""/>
            <span class="d-none d-lg-block">Aishiba</span>
        </a>
        <i class="bi bi-list toggle-sidebar-btn"></i>
    </div>
    <!-- End Logo -->

    <div class="search-bar">
        <form
                class="search-form d-flex align-items-center"
                method="POST"
                action="#"
        >
            <input
                    type="text"
                    name="query"
                    placeholder="Search"
                    title="Enter search keyword"
            />
            <button type="submit" title="Search">
                <i class="bi bi-search"></i>
            </button>
        </form>
    </div>
    <!-- End Search Bar -->

    <nav class="header-nav ms-auto">
        <ul class="d-flex align-items-center">
            <li class="nav-item d-block d-lg-none">
                <a class="nav-link nav-icon search-bar-toggle" href="#">
                    <i class="bi bi-search"></i>
                </a>
            </li>
            <!-- End Search Icon-->

            <li class="nav-item dropdown">
                <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
                    <i class="bi bi-bell"></i>
                    <span class="badge bg-primary badge-number">4</span> </a
                ><!-- End Notification Icon -->

                <ul
                        class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications"
                >
                    <li class="dropdown-header">
                        You have 4 new notifications
                        <a href="#"
                        ><span class="badge rounded-pill bg-primary p-2 ms-2"
                        >View all</span
                        ></a
                        >
                    </li>
                    <li>
                        <hr class="dropdown-divider"/>
                    </li>

                    <li class="notification-item">
                        <i class="bi bi-exclamation-circle text-warning"></i>
                        <div>
                            <h4>Lorem Ipsum</h4>
                            <p>Quae dolorem earum veritatis oditseno</p>
                            <p>30 min. ago</p>
                        </div>
                    </li>

                    <li>
                        <hr class="dropdown-divider"/>
                    </li>

                    <li class="notification-item">
                        <i class="bi bi-x-circle text-danger"></i>
                        <div>
                            <h4>Atque rerum nesciunt</h4>
                            <p>Quae dolorem earum veritatis oditseno</p>
                            <p>1 hr. ago</p>
                        </div>
                    </li>

                    <li>
                        <hr class="dropdown-divider"/>
                    </li>

                    <li class="notification-item">
                        <i class="bi bi-check-circle text-success"></i>
                        <div>
                            <h4>Sit rerum fuga</h4>
                            <p>Quae dolorem earum veritatis oditseno</p>
                            <p>2 hrs. ago</p>
                        </div>
                    </li>

                    <li>
                        <hr class="dropdown-divider"/>
                    </li>

                    <li class="notification-item">
                        <i lass="bi bi-info-circle text-primary"></i>
                        <div>
                            <h4>Dicta reprehenderit</h4>
                            <p>Quae dolorem earum veritatis oditseno</p>
                            <p>4 hrs. ago</p>
                        </div>
                    </li>

                    <li>
                        <hr class="dropdown-divider"/>
                    </li>
                    <li class="dropdown-footer">
                        <a href="#">Show all notifications</a>
                    </li>
                </ul>
                <!-- End Notification Dropdown Items -->
            </li>
            <!-- End Notification Nav -->

            <li class="nav-item dropdown">
                <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
                    <i class="bi bi-chat-left-text"></i>
                    <span class="badge bg-success badge-number">3</span> </a
                ><!-- End Messages Icon -->

                <ul
                        class="dropdown-menu dropdown-menu-end dropdown-menu-arrow messages"
                >
                    <li class="dropdown-header">
                        You have 3 new messages
                        <a href="#"
                        ><span class="badge rounded-pill bg-primary p-2 ms-2"
                        >View all</span
                        ></a
                        >
                    </li>
                    <li>
                        <hr class="dropdown-divider"/>
                    </li>

                    <li class="message-item">
                        <a href="#">
                            <img
                                    src="assets/img/messages-1.jpg"
                                    alt=""
                                    class="rounded-circle"
                            />
                            <div>
                                <h4>Maria Hudson</h4>
                                <p>
                                    Velit asperiores et ducimus soluta repudiandae labore
                                    officia est ut...
                                </p>
                                <p>4 hrs. ago</p>
                            </div>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider"/>
                    </li>

                    <li class="message-item">
                        <a href="#">
                            <img
                                    src="assets/img/messages-2.jpg"
                                    alt=""
                                    class="rounded-circle"
                            />
                            <div>
                                <h4>Anna Nelson</h4>
                                <p>
                                    Velit asperiores et ducimus soluta repudiandae labore
                                    officia est ut...
                                </p>
                                <p>6 hrs. ago</p>
                            </div>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider"/>
                    </li>

                    <li class="message-item">
                        <a href="#">
                            <img
                                    src="assets/img/messages-3.jpg"
                                    alt=""
                                    class="rounded-circle"
                            />
                            <div>
                                <h4>David Muldon</h4>
                                <p>
                                    Velit asperiores et ducimus soluta repudiandae labore
                                    officia est ut...
                                </p>
                                <p>8 hrs. ago</p>
                            </div>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider"/>
                    </li>

                    <li class="dropdown-footer">
                        <a href="#">Show all messages</a>
                    </li>
                </ul>
                <!-- End Messages Dropdown Items -->
            </li>
            <!-- End Messages Nav -->

            <li class="nav-item dropdown pe-3">
                <a
                        class="nav-link nav-profile d-flex align-items-center pe-0"
                        href="#"
                        data-bs-toggle="dropdown"
                >
                    <img
                            src="assets/img/profile-img.jpg"
                            alt="Profile"
                            class="rounded-circle"
                    />
                    <span class="d-none d-md-block dropdown-toggle ps-2"
                    >K. Anderson</span
                    > </a
                ><!-- End Profile Iamge Icon -->

                <ul
                        class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile"
                >
                    <li class="dropdown-header">
                        <h6>Kevin Anderson</h6>
                        <span>Web Designer</span>
                    </li>
                    <li>
                        <hr class="dropdown-divider"/>
                    </li>

                    <li>
                        <a
                                class="dropdown-item d-flex align-items-center"
                                href="users-profile.html"
                        >
                            <i class="bi bi-person"></i>
                            <span>My Profile</span>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider"/>
                    </li>

                    <li>
                        <a
                                class="dropdown-item d-flex align-items-center"
                                href="users-profile.html"
                        >
                            <i class="bi bi-gear"></i>
                            <span>Account Settings</span>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider"/>
                    </li>

                    <li>
                        <a
                                class="dropdown-item d-flex align-items-center"
                                href="pages-faq.html"
                        >
                            <i class="bi bi-question-circle"></i>
                            <span>Need Help?</span>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider"/>
                    </li>

                    <li>
                        <a class="dropdown-item d-flex align-items-center" href="#">
                            <i class="bi bi-box-arrow-right"></i>
                            <span>Sign Out</span>
                        </a>
                    </li>
                </ul>
                <!-- End Profile Dropdown Items -->
            </li>
            <!-- End Profile Nav -->
        </ul>
    </nav>
    <!-- End Icons Navigation -->
</header>
<!-- End Header -->

<!-- ======= Sidebar ======= -->
<aside id="sidebar" class="sidebar">
    <ul class="sidebar-nav" id="sidebar-nav">
        <li class="nav-item">
            <a class="nav-link " href="index.html">
                <i class="bi bi-grid fs-5"></i>
                <span>Dashboard</span>
            </a>
        </li><!-- End Dashboard Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#components-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-box-seam fs-5"></i><span>Sản phẩm</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="components-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
                <li>
                    <a href="product.html">
                        <i class="bi bi-list-ul fs-5"></i><span>Danh sách sản phẩm</span>
                    </a>
                </li>
                <li>
                    <a href="supplier.html">
                        <i class="bi bi-truck fs-5"></i><span>Nhà cung cấp</span>
                    </a>
                </li>
            </ul>
        </li><!-- End Components Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#forms-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-people fs-5"></i><span>Nhân viên</span>
            </a>
        </li><!-- End Forms Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#tables-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-cart-check fs-5"></i><span>Giao dịch</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="tables-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
                <li>
                    <a href="orders.html">
                        <i class="bi bi-receipt fs-5"></i><span>Đơn hàng</span>
                    </a>
                </li>
                <li>
                    <a href="stocks.html">
                        <i class="bi bi-box-arrow-in-down fs-5"></i><span>Nhập hàng</span>
                    </a>
                </li>
            </ul>
        </li><!-- End Tables Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#charts-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-people-fill fs-5"></i><span>Khách hàng</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="charts-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
                <li>
                    <a href="#">
                        <i class="bi bi-person-lines-fill fs-5"></i><span>Danh sách khách hàng</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-person-x fs-5"></i><span>Khóa/Mở tài khoản khách hàng</span>
                    </a>
                </li>
            </ul>
        </li><!-- End Charts Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#icons-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-graph-up fs-5"></i><span>Thống kê</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="icons-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
                <li>
                    <a href="icons-bootstrap.html">
                        <i class="bi bi-file-earmark-excel fs-5"></i><span>Xuất báo cáo</span>
                    </a>
                </li>
                <li>
                    <a href="icons-remix.html">
                        <i class="bi bi-box-seam fs-5"></i><span>Hàng tồn kho</span>
                    </a>
                </li>
                <li>
                    <a href="icons-boxicons.html">
                        <i class="bi bi-bar-chart fs-5"></i><span>Lược đồ doanh thu</span>
                    </a>
                </li>
            </ul>
        </li><!-- End Icons Nav -->
        <li class="nav-heading">Pages</li>
        <li class="nav-item">
            <a class="nav-link collapsed" href="users-profile.html">
                <i class="bi bi-person fs-5"></i>
                <span>Thông tin cá nhân</span>
            </a>
        </li><!-- End Profile Page Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" href="pages-faq.html">
                <i class="bi bi-question-circle fs-5"></i>
                <span>F.A.Q</span>
            </a>
        </li><!-- End F.A.Q Page Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" href="pages-contact.html">
                <i class="bi bi-envelope fs-5"></i>
                <span>Liên hệ</span>
            </a>
        </li><!-- End Contact Page Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" href="pages-register.html">
                <i class="bi bi-person-plus fs-5"></i>
                <span>Đăng ký</span>
            </a>
        </li><!-- End Register Page Nav -->
        <li class="nav-item">
            <a class="nav-link collapsed" href="pages-login.html">
                <i class="bi bi-box-arrow-in-right fs-5"></i>
                <span>Đăng nhập</span>
            </a>
        </li><!-- End Login Page Nav -->
    </ul>
</aside><!-- End Sidebar-->

<main id="main" class="main">
    <div class="pagetitle">
        <h1>Nhập hàng</h1>
        <nav>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item">Giao dịch</li>
                <li class="breadcrumb-item active">Nhập hàng</li>
            </ol>
        </nav>
    </div>

    <section class="section">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title fs-4 text-primary">Danh sách phiếu nhập hàng</h5>
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <!-- Thanh tìm kiếm -->
                    <div class="search-box flex-grow-1">
                        <div class="input-group">
                  <span class="input-group-text bg-light">
                    <i class="bi bi-search"></i>
                  </span>
                            <input type="text" class="form-control" id="searchInput"
                                   placeholder="Theo mã phiếu nhập, nhà cung cấp, thời gian,..."/>
                            <button class="btn btn-outline-secondary dropdown-toggle" type="button"
                                    data-bs-toggle="dropdown">
                                <i class="bi bi-funnel"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Các nút chức năng -->
                    <div class="d-flex gap-2">
                        <button class="btn btn-success">
                            <i class="bi bi-plus-lg"></i> Nhập hàng
                        </button>
                        <button class="btn btn-primary">
                            <i class="bi bi-download"></i> Xuất file
                        </button>
                        <div class="btn-group">
                            <button class="btn btn-light dropdown-toggle" data-bs-toggle="dropdown">
                                <i class="bi bi-three-dots"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Bảng danh sách -->
                <div class="table-responsive">
                    <table class="table table-hover align-middle">
                        <thead class="bg-light">
                        <tr>
                            <th width="40">
                                <input type="checkbox" class="form-check-input"/>
                            </th>
                            <th width="40">★</th>
                            <th>Mã nhập hàng</th>
                            <th>Thời gian</th>
                            <th>Nhà cung cấp</th>
                            <th class="text-end" width="160">Cần trả NCC</th>
                            <th width="220" style="padding-left: 40px">Trạng thái</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td><input type="checkbox" class="form-check-input"/></td>
                            <td><i class="bi bi-star text-warning"></i></td>
                            <td><a href="#" class="text-primary">PN000046</a></td>
                            <td>15/04/2025 08:34</td>
                            <td>Đại lý Hồng Phúc</td>
                            <td class="text-end">1,500,000</td>
                            <td style="padding-left: 30px"><span class="badge bg-success">Đã nhập hàng</span></td>
                        </tr>

                        <tr>
                            <td><input type="checkbox" class="form-check-input"/></td>
                            <td><i class="bi bi-star text-warning"></i></td>
                            <td><a href="#" class="text-primary">PN000045</a></td>
                            <td>14/04/2025 15:30</td>
                            <td>Công ty Pharmedic</td>
                            <td class="text-end">2,800,000</td>
                            <td style="padding-left: 30px"><span class="badge bg-warning text-dark">Chờ nhập hàng</span>
                            </td>
                        </tr>

                        <tr>
                            <td><input type="checkbox" class="form-check-input"/></td>
                            <td><i class="bi bi-star text-warning"></i></td>
                            <td><a href="#" class="text-primary">PN000044</a></td>
                            <td>13/04/2025 10:15</td>
                            <td>Cửa hàng Đại Việt</td>
                            <td class="text-end">3,200,000</td>
                            <td style="padding-left: 30px"><span class="badge bg-info">Đang nhập hàng</span></td>
                        </tr>

                        <!-- Continue with similar pattern for remaining rows -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>
</main>
<style>
    .badge {
        padding: 0.5em 0.8em;
        font-weight: 500;
        font-size: 0.875rem;
    }

    .badge.bg-success {
        background-color: #198754 !important;
    }

    .badge.bg-warning {
        background-color: #ffc107 !important;
        color: #000 !important;
    }

    .badge.bg-info {
        background-color: #0dcaf0 !important;
    }

    .badge.bg-danger {
        background-color: #dc3545 !important;
    }

    .badge.bg-secondary {
        background-color: #6c757d !important;
    }
</style>

<style>
    /* Search box styling */
    .search-box {
        max-width: 650px; /* Reduced from default/full width */
        margin-right: 20px;
    }

    .search-box .input-group {
        width: 100%;
    }

    .search-box .form-control {
        height: 38px;
    }

    .search-box .input-group-text,
    .search-box .btn {
        background-color: transparent;
        border-color: #dee2e6;
    }

    .search-box .btn:hover {
        background-color: #f8f9fa;
    }
</style>

<style>
    /* Modal styling */
    .modal-xl {
        max-width: 850px;
    }

    /* Table numbers */
    .table td.text-end,
    .table th.text-end {
        font-variant-numeric: tabular-nums;
    }

    /* Action buttons */
    .btn i {
        margin-right: 5px;
    }

    /* Info labels */
    .fw-bold {
        color: #6c757d;
    }

    /* Hover effects */
    .bi-three-dots-vertical {
        cursor: pointer;
    }

    .bi-three-dots-vertical:hover {
        color: #0d6efd;
    }
</style>

<style>
    /* Status badge colors */
    .badge.bg-waiting {
        background-color: #ffc107 !important;
        color: #000 !important;
    }

    .badge.bg-confirmed {
        background-color: #0dcaf0 !important;
        color: #fff !important;
    }

    .badge.bg-importing {
        background-color: #0d6efd !important;
        color: #fff !important;
    }

    .badge.bg-completed {
        background-color: #198754 !important;
        color: #fff !important;
    }

    .badge.bg-cancelled {
        background-color: #dc3545 !important;
        color: #fff !important;
    }

    /* Status select colors */
    .form-select option[value="waiting"] {
        background-color: #fff3cd;
        color: #000;
    }

    .form-select option[value="confirmed"] {
        background-color: #cff4fc;
        color: #000;
    }

    .form-select option[value="importing"] {
        background-color: #cfe2ff;
        color: #000;
    }

    .form-select option[value="completed"] {
        background-color: #d1e7dd;
        color: #000;
    }

    .form-select option[value="cancelled"] {
        background-color: #f8d7da;
        color: #000;
    }
</style>

<style>
    /* Status select styling */
    .form-select option:checked {
        background-color: var(--status-bg);
        color: var(--status-text);
    }

    #statusSelect {
        color: var(--status-text);
        background-color: var(--status-bg);
    }

    #statusSelect option[value="waiting"] {
        --status-bg: #fff3cd;
        --status-text: #664d03;
    }

    #statusSelect option[value="confirmed"] {
        --status-bg: #cff4fc;
        --status-text: #055160;
    }

    #statusSelect option[value="importing"] {
        --status-bg: #cfe2ff;
        --status-text: #084298;
    }

    #statusSelect option[value="completed"] {
        --status-bg: #d1e7dd;
        --status-text: #0f5132;
    }

    #statusSelect option[value="cancelled"] {
        --status-bg: #f8d7da;
        --status-text: #842029;
    }
</style>
<!-- ======= Script ======= -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Xử lý checkbox chọn tất cả
        const selectAll = document.querySelector('thead .form-check-input');
        const checkboxes = document.querySelectorAll('tbody .form-check-input');

        selectAll.addEventListener('change', function () {
            checkboxes.forEach(checkbox => {
                checkbox.checked = this.checked;
            });
        });

        // Cập nhật trạng thái "chọn tất cả"
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function () {
                const allChecked = Array.from(checkboxes).every(cb => cb.checked);
                const someChecked = Array.from(checkboxes).some(cb => cb.checked);

                selectAll.checked = allChecked;
                selectAll.indeterminate = someChecked && !allChecked;
            });
        });

        // Xử lý nút ngôi sao
        const starButtons = document.querySelectorAll('.bi-star');
        starButtons.forEach(star => {
            star.addEventListener('click', function (e) {
                e.preventDefault();

                // Toggle class để đổi màu sao
                if (this.classList.contains('bi-star-fill')) {
                    this.classList.remove('bi-star-fill');
                    this.classList.add('bi-star');
                } else {
                    this.classList.remove('bi-star');
                    this.classList.add('bi-star-fill');
                }

                // Lưu trạng thái vào localStorage
                const orderId = this.closest('tr').querySelector('a').textContent;
                const isFavorite = this.classList.contains('bi-star-fill');
                localStorage.setItem(`favorite_${orderId}`, isFavorite);
            });

            // Khôi phục trạng thái từ localStorage khi load trang
            const orderId = star.closest('tr').querySelector('a').textContent;
            const isFavorite = localStorage.getItem(`favorite_${orderId}`) === 'true';
            if (isFavorite) {
                star.classList.remove('bi-star');
                star.classList.add('bi-star-fill');
            }
        });

        // Thêm style cho ngôi sao
        const style = document.createElement('style');
        style.textContent = `
        .bi-star, .bi-star-fill {
          cursor: pointer;
          transition: all 0.2s;
          -webkit-text-stroke: 0.25px #ffc107;  /* Viền vàng mỏng hơn */
          user-select: none;  /* Thêm dòng này */
        }
        .bi-star:hover, .bi-star-fill:hover {
          transform: scale(1.2);
        }
        .bi-star-fill {
          color: #ffc107 !important;
        }
        td.text-center {
          cursor: default;  /* Thêm dòng này */
        }
      `;
        document.head.appendChild(style);

        // Xử lý tìm kiếm
        const searchInput = document.getElementById('searchInput');
        const filterDropdown = document.querySelector('.dropdown-toggle');
        const tableRows = document.querySelectorAll('tbody tr');

        // Hàm tìm kiếm
        function searchTable() {
            const searchTerm = searchInput.value.toLowerCase();

            tableRows.forEach(row => {
                const code = row.querySelector('a.text-primary').textContent.toLowerCase();
                const supplier = row.querySelector('td:nth-child(5)').textContent.toLowerCase();
                const status = row.querySelector('.badge').textContent.toLowerCase();
                const date = row.querySelector('td:nth-child(4)').textContent.toLowerCase();

                const matchesSearch =
                    code.includes(searchTerm) ||
                    supplier.includes(searchTerm) ||
                    status.includes(searchTerm) ||
                    date.includes(searchTerm);

                row.style.display = matchesSearch ? '' : 'none';
            });
        }

        // Xử lý sự kiện tìm kiếm
        searchInput.addEventListener('input', searchTable);

        // Fix click handler for order codes - replace both existing click handlers
        document.querySelectorAll('td a.text-primary').forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();

                // Get data from clicked row
                const row = this.closest('tr');
                const orderData = {
                    id: this.textContent,
                    date: row.cells[3].textContent,
                    supplier: row.cells[4].textContent,
                    amount: row.cells[5].textContent,
                    status: row.querySelector('.badge').textContent,
                    statusClass: row.querySelector('.badge').className
                };

                // Get and update modal content
                const modal = document.getElementById('orderDetailModal');

                // Update fields
                modal.querySelector('input[value="HD000045"]').value = orderData.id;
                modal.querySelector('input[value="14/04/2025 08:33"]').value = orderData.date;
                modal.querySelector('input[value="Cửa hàng Đại Việt"]').value = orderData.supplier;

                // Update status select
                const statusSelect = modal.querySelector('select');
                Array.from(statusSelect.options).forEach(option => {
                    if (option.text === orderData.status) {
                        option.selected = true;
                    }
                });

                // Show modal
                const bsModal = new bootstrap.Modal(modal);
                bsModal.show();
            });
        });

        // Fix click handler for showing order details
        document.querySelectorAll('td a.text-primary').forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();

                // Get data from clicked row
                const row = this.closest('tr');
                const orderData = {
                    id: this.textContent,
                    date: row.cells[3].textContent,
                    supplier: row.cells[4].textContent,
                    amount: row.cells[5].textContent,
                    status: row.querySelector('.badge').textContent,
                    statusClass: row.querySelector('.badge').className
                };

                // Get modal and show it
                const modal = new bootstrap.Modal(document.getElementById('orderDetailModal'));

                // Update modal content before showing
                updateModalContent(orderData);

                modal.show();
            });
        });

        // Helper function to update modal content
        function updateModalContent(data) {
            const modal = document.getElementById('orderDetailModal');

            // Update header info
            modal.querySelector('.modal-body .mb-3:nth-child(1) span').textContent = data.id;
            modal.querySelector('.modal-body .mb-3:nth-child(2) span').textContent = data.date;
            modal.querySelector('.modal-body .mb-3:nth-child(3) a').textContent = data.supplier;

            // Update status badge
            const badge = modal.querySelector('.badge');
            badge.textContent = data.status;
            badge.className = data.statusClass;

            // Update amounts in summary
            const totalAmount = modal.querySelector('tr:nth-child(5) td.text-end');
            totalAmount.textContent = data.amount;
        }
    });
</script>
<script>
    // Add after existing script
    document.addEventListener('DOMContentLoaded', function () {
        // Chỉ chọn các link mã đơn hàng (có class text-primary trong cột mã hóa đơn)
        document.querySelectorAll('td.text-start a.text-primary').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const modal = new bootstrap.Modal(document.getElementById('orderDetailModal'));
                modal.show();
            });
        });
    });

    document.addEventListener('DOMContentLoaded', function () {
        // Handle status change
        const statusSelect = document.getElementById('statusSelect');
        statusSelect.addEventListener('change', function () {
            const selectedOption = this.options[this.selectedIndex];
            const status = selectedOption.textContent;
            const value = selectedOption.value;

            // Update badge in table
            const currentRow = document.querySelector(`td a[data-id="${currentOrderId}"]`).closest('tr');
            const badge = currentRow.querySelector('.badge');

            // Remove old classes and add new ones
            badge.className = `badge bg-${value}`;
            badge.textContent = status;

            // Optional: Add confirmation for certain status changes
            if (value === 'cancelled') {
                if (!confirm('Bạn có chắc muốn hủy đơn nhập này?')) {
                    this.value = this.getAttribute('data-original-value');
                    return;
                }
            }

            // Store original value for cancellation
            this.setAttribute('data-original-value', value);
        });
    });

    // Add to your existing status change handler
    document.addEventListener('DOMContentLoaded', function () {
        const statusSelect = document.getElementById('statusSelect');

        // Set initial colors
        updateSelectStyle(statusSelect);

        statusSelect.addEventListener('change', function () {
            updateSelectStyle(this);
        });

        function updateSelectStyle(select) {
            const selectedOption = select.options[select.selectedIndex];
            const value = selectedOption.value;

            // Set CSS variables for the select element
            select.style.setProperty('--status-bg', getComputedStyle(selectedOption).backgroundColor);
            select.style.setProperty('--status-text', getComputedStyle(selectedOption).color);
        }
    });

    document.addEventListener('DOMContentLoaded', function () {
        // Get modal and buttons
        const modal = document.getElementById('orderDetailModal');
        const openButton = modal.querySelector('.btn-success');
        const saveButton = modal.querySelector('.btn-primary');
        const returnButton = modal.querySelector('.btn-info');
        const printButton = modal.querySelector('.btn-secondary');
        const cancelButton = modal.querySelector('.btn-danger');

        // Mở phiếu button
        openButton.addEventListener('click', function () {
            const orderId = modal.querySelector('input[value^="HD"]').value;
            const status = modal.querySelector('#statusSelect').value;

            if (status === 'completed' || status === 'cancelled') {
                alert('Không thể mở phiếu đã hoàn thành hoặc đã hủy!');
                return;
            }

            // Here you would redirect to edit page
            alert(`Mở phiếu nhập ${orderId} để chỉnh sửa`);
        });

        // Lưu button
        saveButton.addEventListener('click', function () {
            const status = modal.querySelector('#statusSelect').value;

            if (status === 'cancelled') {
                alert('Không thể lưu phiếu đã hủy!');
                return;
            }

            // Validate changes
            if (confirm('Bạn có chắc muốn lưu các thay đổi?')) {
                alert('Đã lưu thay đổi thành công!');
                // Here you would save changes to database
            }
        });

        // Trả hàng nhập button
        returnButton.addEventListener('click', function () {
            const status = modal.querySelector('#statusSelect').value;

            if (status !== 'completed') {
                alert('Chỉ có thể trả hàng cho phiếu đã nhập hoàn tất!');
                return;
            }

            if (confirm('Bạn có chắc muốn tạo phiếu trả hàng nhập?')) {
                // Here you would create return order
                alert('Đã tạo phiếu trả hàng nhập mới!');
            }
        });

        // In đơn button
        printButton.addEventListener('click', function () {
            const orderId = modal.querySelector('input[value^="HD"]').value;

            // Here you would generate and print document
            alert(`Đang in phiếu nhập ${orderId}...`);
            window.print();
        });

        // Hủy đơn button
        cancelButton.addEventListener('click', function () {
            const status = modal.querySelector('#statusSelect').value;

            if (status === 'completed') {
                alert('Không thể hủy phiếu đã hoàn thành!');
                return;
            }

            if (confirm('Bạn có chắc muốn hủy phiếu nhập này?')) {
                const reason = prompt('Vui lòng nhập lý do hủy:');
                if (reason) {
                    // Here you would update order status
                    modal.querySelector('#statusSelect').value = 'cancelled';
                    alert('Đã hủy phiếu nhập!');
                }
            }
        });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Get buttons
        const importButton = document.querySelector('.btn.btn-success'); // Nhập hàng button
        const exportButton = document.querySelector('.btn.btn-primary'); // Xuất file button
        const moreButton = document.querySelector('.btn-group .btn.btn-light'); // More options button

        // Nhập hàng button
        importButton.addEventListener('click', function () {
            // Create new import form modal
            const formHtml = `
                  <div class="modal fade" id="newImportModal">
                      <div class="modal-dialog">
                          <div class="modal-content">
                              <div class="modal-header">
                                  <h5 class="modal-title">Tạo phiếu nhập mới</h5>
                                  <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                              </div>
                              <div class="modal-body">
                                  <div class="mb-3">
                                      <label class="form-label">Nhà cung cấp</label>
                                      <select class="form-select">
                                          <option>Chọn nhà cung cấp</option>
                                          <option>Đại lý Hồng Phúc</option>
                                          <option>Công ty Pharmedic</option>
                                          <option>Cửa hàng Đại Việt</option>
                                      </select>
                                  </div>
                                  <div class="mb-3">
                                      <label class="form-label">Chi nhánh</label>
                                      <select class="form-select">
                                          <option>Chi nhánh trung tâm</option>
                                      </select>
                                  </div>
                                  <div class="mb-3">
                                      <label class="form-label">Ghi chú</label>
                                      <textarea class="form-control" rows="3"></textarea>
                                  </div>
                              </div>
                              <div class="modal-footer">
                                  <button class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                                  <button class="btn btn-primary" onclick="createNewImport()">Tạo phiếu</button>
                              </div>
                          </div>
                      </div>
                  </div>
              `;
            document.body.insertAdjacentHTML('beforeend', formHtml);
            const modal = new bootstrap.Modal(document.getElementById('newImportModal'));
            modal.show();
        });

        // Xuất file button
        exportButton.addEventListener('click', function () {
            const dropdown = `
                  <div class="dropdown-menu">
                      <a class="dropdown-item" href="#" onclick="exportToExcel()">
                          <i class="bi bi-file-excel me-2"></i>Xuất Excel
                      </a>
                      <a class="dropdown-item" href="#" onclick="exportToPDF()">
                          <i class="bi bi-file-pdf me-2"></i>Xuất PDF
                      </a>
                      <a class="dropdown-item" href="#" onclick="exportToCSV()">
                          <i class="bi bi-file-text me-2"></i>Xuất CSV
                      </a>
                  </div>
              `;
            this.insertAdjacentHTML('afterend', dropdown);
            // Toggle dropdown manually
            exportButton.insertAdjacentHTML('afterend', dropdown);
        });

        // More options button
        const moreOptions = `
              <div class="dropdown-menu">
                  <a class="dropdown-item" href="#"><i class="bi bi-arrow-clockwise me-2"></i>Làm mới</a>
                  <a class="dropdown-item" href="#"><i class="bi bi-funnel me-2"></i>Lọc nâng cao</a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i>Cài đặt hiển thị</a>
              </div>
          `;
        moreButton.insertAdjacentHTML('afterend', moreOptions);
    });

    // Helper functions for export
    function exportToExcel() {
        alert('Đang xuất file Excel...');
        // Add Excel export logic here
    }

    function exportToPDF() {
        alert('Đang xuất file PDF...');
        // Add PDF export logic here
    }

    function exportToCSV() {
        alert('Đang xuất file CSV...');
        // Add CSV export logic here
    }

    // Function to create new import
    function createNewImport() {
        const modal = bootstrap.Modal.getInstance(document.getElementById('newImportModal'));
        alert('Đã tạo phiếu nhập mới!');
        modal.hide();
        // Add logic to create new import here
    }

</script>
// Modal
<div class="modal fade" id="orderDetailModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header ">
                <h5 class="modal-title">Chi tiết đơn nhập</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row g-4">
                    <!-- Left Column -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label">Mã đơn nhập:</label>
                            <input type="text" class="form-control" value="HD000045" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Thời gian:</label>
                            <div class="input-group">
                                <input type="text" class="form-control" value="14/04/2025 08:33" readonly>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Nhà cung cấp:</label>
                            <input type="text" class="form-control" value="Cửa hàng Đại Việt" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Người tạo: </label>
                            <input type="text" class="form-control" value="Trần Trung Kiên" readonly>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label">Trạng thái:</label>
                            <select class="form-select" id="statusSelect">
                                <option value="waiting" class="text-warning">Chờ nhận hàng</option>
                                <option value="confirmed" class="text-info">Đã xác nhận</option>
                                <option value="importing" class="text-primary">Đang nhập hàng</option>
                                <option value="completed" class="text-success">Đã nhập hàng</option>
                                <option value="cancelled" class="text-danger">Đã hủy</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Chi nhánh:</label>
                            <input type="text" class="form-control" value="Chi nhánh trung tâm" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Người nhập:</label>
                            <input type="text" class="form-control" value="Trần Trung Kiên" readonly>
                        </div>
                    </div>
                </div>

                <!-- Products Table -->
                <div class="table-responsive mt-4">
                    <table class="table table-hover align-middle">
                        <thead class="table-light">
                        <tr>
                            <th>Mã hàng</th>
                            <th>Tên hàng</th>
                            <th class="text-end">Số lượng</th>
                            <th class="text-end">Đơn giá</th>
                            <th class="text-end">Giảm giá</th>
                            <th class="text-end">Giá bán</th>
                            <th class="text-end">Thành tiền</th>
                            <th width="40"></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>BG0003</td>
                            <td>Váy cao cấp hồng</td>
                            <td class="text-end">12</td>
                            <td class="text-end">140,000</td>
                            <td class="text-end">140,000</td>
                            <td class="text-end">140,000</td>
                            <td class="text-end">1,680,000</td>
                            <td><i class="bi bi-three-dots-vertical"></i></td>
                        </tr>
                        <tr>
                            <td>BG0004</td>
                            <td>Váy đầm Kitty bé gái 4 tuổi</td>
                            <td class="text-end">13</td>
                            <td class="text-end">28,000</td>
                            <td class="text-end">28,000</td>
                            <td class="text-end">28,000</td>
                            <td class="text-end">364,000</td>
                            <td><i class="bi bi-three-dots-vertical"></i></td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Summary -->
                <div class="row mt-3">
                    <div class="col-md-5 ms-auto">
                        <table class="table table-sm">
                            <tr>
                                <td>Tổng số lượng:</td>
                                <td class="text-end">25</td>
                            </tr>
                            <tr>
                                <td>Tổng tiền hàng:</td>
                                <td class="text-end">2,044,000</td>
                            </tr>
                            <tr>
                                <td>Giảm giá hóa đơn:</td>
                                <td class="text-end">0</td>
                            </tr>
                            <tr>
                                <td>Tổng cộng:</td>
                                <td class="text-end">0</td>
                            </tr>
                            <tr>
                                <td>Tiền đã trả NCC:</td>
                                <td class="text-end">2,044,000</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="modal-footer">
                <div class="d-flex gap-2 w-100 justify-content-end">
                    <button class="btn btn-success">
                        <i class="bi bi-check-circle"></i> Mở phiếu
                    </button>
                    <button class="btn btn-primary">
                        <i class="bi bi-save"></i> Lưu
                    </button>
                    <button class="btn btn-info text-white">
                        <i class="bi bi-arrow-return-left"></i> Trả hàng nhập
                    </button>
                    <button class="btn btn-secondary">
                        <i class="bi bi-printer"></i> In đơn
                    </button>
                    <button class="btn btn-danger">
                        <i class="bi bi-x-circle"></i> Hủy đơn
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- ======= Footer ======= -->
<footer id="footer" class="footer">
    <div class="copyright">
        &copy; Copyright <strong><span>Aishiba</span></strong
    >. All Rights Reserved
    </div>
    <div class="credits">Designed by <a href="#">Team Seven</a></div>
</footer>

<a
        href="#"
        class="back-to-top d-flex align-items-center justify-content-center"
>
    <i class="bi bi-arrow-up-short"></i>
</a>

<!-- Vendor JS Files -->
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
<script src="assets/vendor/chart.js/chart.umd.js"></script>
<script src="assets/vendor/echarts/echarts.min.js"></script>
<script src="assets/vendor/quill/quill.min.js"></script>
<script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
<script src="assets/vendor/tinymce/tinymce.min.js"></script>
<script src="assets/vendor/php-email-form/validate.js"></script>

<!-- Template Main JS File -->
<script src="assets/js/main.js"></script>

</body>
</html>
